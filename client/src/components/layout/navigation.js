import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState } from "react";
import { Link, useLocation } from "wouter";
import { Mountain, Sprout, Users, Building, ServerCog, ChartLine, MessageCircle, Leaf, Settings, LogOut, LogIn, Edit3, User } from "lucide-react";
import { Button } from "@/components/ui/button";
import { cn } from "@/lib/utils";
import { useAuth } from "@/hooks/useAuth";
const MAIN_NAV_ITEMS = [
    { href: "/dashboard", label: "Dashboard", icon: ChartLine, count: null },
    { href: "/people", label: "Village Community", icon: Users, count: null },
    { href: "/crowdfunding", label: "Fund Village-One", icon: ChartLine, count: null },
];
const FORUM_SECTIONS = [
    { href: "/forum/land", label: "Land", icon: Mountain, count: 0 },
    { href: "/forum/resources", label: "Resources", icon: Sprout, count: 0 },
    { href: "/forum/people", label: "People", icon: Users, count: 0 },
    { href: "/forum/facilities", label: "Facilities", icon: Building, count: 0 },
    { href: "/forum/operations", label: "Operations", icon: ServerCog, count: 0 },
    { href: "/forum/ownership", label: "Ownership", icon: Leaf, count: 0 },
];
export default function Navigation() {
    const [location] = useLocation();
    const [chatOpen, setChatOpen] = useState(false);
    const { user, profile, isAuthenticated, signOut } = useAuth();
    const currentUser = isAuthenticated && user ? {
        name: profile?.displayName || user.email?.split("@")[0] || "User",
        archetype: "Village Builder",
        level: 1,
        contributions: 0,
        avatar: profile?.avatarUrl ||
            "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=80&h=80",
    } : null;
    return (_jsx("nav", { className: "fixed top-0 left-0 w-64 h-full bg-void border-r border-purple-deep z-50 texture-organic", children: _jsxs("div", { className: "p-6 h-full overflow-y-auto", children: [_jsx(Link, { href: "/", children: _jsxs("div", { className: "flex items-center space-x-3 mb-8 cursor-pointer", "data-testid": "nav-logo", children: [_jsx("div", { className: "w-10 h-10 bg-gradient-to-br from-neon-cyan to-electric-green rounded-lg flex items-center justify-center", children: _jsx(Leaf, { className: "text-space", size: 20 }) }), _jsx("h1", { className: "text-xl font-cyber font-bold text-neon-cyan", children: "Village-One" })] }) }), _jsx("div", { className: "card-rare rounded-lg p-4 mb-6 bg-gradient-to-br from-void to-purple-deep", children: currentUser ? (_jsxs(_Fragment, { children: [_jsx(Link, { href: `/profile/${user?.id || 'me'}`, children: _jsxs("div", { className: "cursor-pointer hover:scale-105 transition-transform duration-300", "data-testid": "nav-profile-card", children: [_jsxs("div", { className: "flex items-center space-x-3 mb-2", children: [_jsx("img", { src: currentUser?.avatar, alt: "User Avatar", className: "w-12 h-12 rounded-full border-2 border-holo-gold", "data-testid": "img-avatar" }), _jsxs("div", { children: [_jsx("h3", { className: "font-semibold text-holo-gold", "data-testid": "text-username", children: currentUser?.name }), _jsx("p", { className: "text-xs text-neon-cyan", "data-testid": "text-archetype", children: currentUser?.archetype })] })] }), _jsxs("div", { className: "text-xs space-y-1", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { children: "Level" }), _jsx("span", { className: "text-electric-green", "data-testid": "text-level", children: currentUser?.level })] }), _jsx("div", { className: "w-full bg-void rounded-full h-1", children: _jsx("div", { className: "contribution-bar w-3/4" }) }), _jsxs("div", { className: "flex justify-between text-xs", children: [_jsx("span", { children: "Contributions" }), _jsx("span", { className: "text-holo-gold", "data-testid": "text-contributions", children: currentUser?.contributions?.toLocaleString?.() ?? 0 })] })] })] }) }), _jsxs("div", { className: "flex justify-between mt-3 pt-3 border-t border-purple-deep/50", children: [_jsx(Link, { href: `/profile/${user?.id || 'me'}/edit`, children: _jsx(Button, { variant: "ghost", size: "sm", className: "text-gray-400 hover:text-electric-green p-1 h-auto", "data-testid": "button-edit-profile", children: _jsx(Edit3, { size: 14 }) }) }), _jsx(Button, { variant: "ghost", size: "sm", className: "text-gray-400 hover:text-electric-green p-1 h-auto", "data-testid": "button-settings", children: _jsx(Settings, { size: 14 }) }), _jsx(Button, { variant: "ghost", size: "sm", className: "text-gray-400 hover:text-red-400 p-1 h-auto", onClick: signOut, "data-testid": "button-logout", children: _jsx(LogOut, { size: 14 }) })] })] })) : (_jsxs("div", { className: "text-center", children: [_jsx("div", { className: "w-12 h-12 bg-gradient-to-br from-neon-cyan to-electric-green rounded-full mx-auto mb-3 flex items-center justify-center", children: _jsx(User, { className: "text-space", size: 20 }) }), _jsx("h3", { className: "font-semibold text-white mb-2", children: "Join Village-One" }), _jsx("p", { className: "text-xs text-gray-400 mb-3", children: "Connect with builders creating a sustainable future" }), _jsx(Link, { href: "/login", children: _jsx(Button, { className: "w-full bg-gradient-to-r from-holo-gold to-electric-green text-space font-semibold py-2 px-4 rounded-lg hover:scale-105 transition-transform duration-300 text-sm", "data-testid": "button-join-community", children: "Create Account" }) })] })) }), _jsx("div", { className: "space-y-2 mb-6", children: MAIN_NAV_ITEMS.map((item) => {
                        const Icon = item.icon;
                        const isActive = location === item.href;
                        return (_jsx(Link, { href: item.href, children: _jsxs("div", { className: cn("nav-item flex items-center space-x-3 p-3 rounded-lg transition-all duration-300 cursor-pointer", isActive && "bg-gradient-to-r from-neon-cyan/10 to-electric-green/10 border-l-3 border-neon-cyan"), "data-testid": `nav-${item.label.toLowerCase().replace(/\s+/g, '-')}`, children: [_jsx(Icon, { className: "text-neon-cyan", size: 20 }), _jsx("span", { className: "text-white", children: item.label }), typeof item.count === 'number' && item.count > 0 && (_jsx("span", { className: "ml-auto text-xs bg-electric-green text-space px-2 py-1 rounded-full", "data-testid": `nav-count-${item.label.toLowerCase()}`, children: item.count }))] }) }, item.href));
                    }) }), _jsxs("div", { className: "mb-6", children: [_jsx("h3", { className: "text-sm font-semibold text-gray-400 mb-3 px-3", children: "Community Forum" }), _jsx("div", { className: "space-y-2", children: FORUM_SECTIONS.map((item) => {
                                const Icon = item.icon;
                                const isActive = location === item.href;
                                return (_jsx(Link, { href: item.href, children: _jsxs("div", { className: cn("nav-item flex items-center space-x-3 p-3 rounded-lg transition-all duration-300 cursor-pointer", isActive && "bg-gradient-to-r from-neon-cyan/10 to-electric-green/10 border-l-3 border-neon-cyan"), "data-testid": `nav-${item.label.toLowerCase().replace(/\s+/g, '-')}`, children: [_jsx(Icon, { className: "text-neon-cyan", size: 20 }), _jsx("span", { className: "text-white", children: item.label }), typeof item.count === 'number' && item.count > 0 && (_jsx("span", { className: "ml-auto text-xs bg-electric-green text-space px-2 py-1 rounded-full", "data-testid": `nav-count-${item.label.toLowerCase()}`, children: item.count }))] }) }, item.href));
                            }) })] }), _jsxs("div", { className: "mt-8 pt-6 border-t border-purple-deep space-y-3", children: [isAuthenticated ? (_jsxs(Button, { className: "w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-red-600 to-red-800 text-white font-semibold py-3 rounded-lg hover:scale-105 transition-transform duration-300", onClick: signOut, "data-testid": "button-logout", children: [_jsx(LogOut, { size: 16 }), _jsx("span", { children: "Logout" })] })) : (_jsx(Link, { href: "/login", children: _jsxs(Button, { className: "w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-holo-gold to-electric-green text-space font-semibold py-3 rounded-lg hover:scale-105 transition-transform duration-300", "data-testid": "button-login", children: [_jsx(LogIn, { size: 16 }), _jsx("span", { children: "Login" })] }) })), _jsxs(Button, { className: "w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-neon-cyan to-electric-green text-space font-semibold py-3 rounded-lg hover:scale-105 transition-transform duration-300", onClick: () => setChatOpen(!chatOpen), "data-testid": "button-chat-toggle", children: [_jsx(MessageCircle, { size: 20 }), _jsx("span", { children: "Live Chat" }), _jsx("div", { className: "w-2 h-2 bg-electric-green rounded-full animate-pulse" })] })] })] }) }));
}
